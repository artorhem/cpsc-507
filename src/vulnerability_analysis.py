from snakefood.util import iter_pyfiles, setup_logging, def_ignores
from snakefood.find import find_imports
import pip

def get_dependencies(path):
    """
    Retrieves all dependencies from the projects located at `path`
    :param path: project path
    :return: list of dependencies
    """
    all_symnames = set()
    for fn in iter_pyfiles([path], None):
        all_symnames.update(x[0] for x in find_imports(fn, True, []) if not x[2])

    return all_symnames


def install(package):
    # todo
    pip.main(['install', package])


def get_functions(package):
    """
    Returns a list of functions defined in the provided package
    :param package: name of the package
    :return: list of the names of available functions
    """
    return dir(package)


def get_latest():
    # todo: not necessary?
    pip.main(['list', '--outdated'])